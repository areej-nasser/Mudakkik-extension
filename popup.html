<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <title>مُدَقِّق - تحقق من الأخبار</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="popup.css" />
</head>

<body>
  <!-- Login Screen -->
  <div id="auth" class="card">
    <div class="logo-container">
      <img src="icon48.png" alt="مُدَقِّق" class="logo" />
      <h1>مُدَقِّق</h1>
    </div>
    <p class="subtitle">سجّل دخولك للتحقق من الأخبار</p>

    <div class="form-group">
      <input id="email" type="email" placeholder="البريد الإلكتروني" />
      <input id="password" type="password" placeholder="كلمة المرور" />
      <button id="loginBtn" class="btn-primary">تسجيل الدخول</button>
    </div>

    <p class="signup-link">
      ليس لديك حساب؟
      <a href="https://mudakkik.ddns.net/register" target="_blank">سجّل الآن</a>
    </p>

    <div class="error hidden" id="authError"></div>
  </div>

  <!-- Main App Screen -->
  <div id="app" style="display: none">
    <!-- User Header -->
    <div id="userInfo" class="user-header">
      <div class="user-avatar" id="userAvatar"></div>
      <div class="user-details">
        <span class="welcome">مرحباً</span>
        <span id="userName" class="user-name"></span>
      </div>
      <button id="logoutBtn" class="logout-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
          <polyline points="16 17 21 12 16 7" />
          <line x1="21" y1="12" x2="9" y2="12" />
        </svg>
      </button>
    </div>

    <!-- Main Card -->
    <div class="card main-card">
      <header class="card-header">
        <div class="header-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
            <path d="m9 12 2 2 4-4" />
          </svg>
        </div>
        <h1>مختبر الحقيقة</h1>
        <p class="subtitle">تحقق من صحة الأخبار فوراً</p>
      </header>

      <!-- Period Selector -->
      <div class="period-selector">
        <label for="periodSelect">الفترة الزمنية:</label>
        <select id="periodSelect">
          <option value="1">آخر 24 ساعة</option>
          <option value="3" selected>آخر 3 أيام</option>
          <option value="7">آخر أسبوع</option>
          <option value="30">آخر شهر</option>
          <option value="365">آخر سنة</option>
        </select>
      </div>

      <button id="checkBtn" class="btn-primary">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg>
        تحقق من النص المحدد
      </button>

      <!-- Loading State -->
      <div class="loading" id="loading">
        <div class="spinner"></div>
        <span>جاري التحليل...</span>
      </div>

      <!-- Results Section -->
      <section id="results" class="results hidden">
        <div class="selected-text" id="selectedTextDiv"></div>

        <div id="verdictBox" class="verdict neutral">
          <div class="verdict-header">
            <div class="percentage" id="percentage">–%</div>
            <div class="verdict-label" id="verdict">غير محدد</div>
          </div>
          <p class="verdict-summary" id="explanation"></p>
        </div>

        <div class="sources" id="sources">
          <h3>
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
            </svg>
            المصادر
          </h3>
        </div>
      </section>

      <div class="error hidden" id="errorMsg"></div>
    </div>

    <!-- History Link -->
    <a href="https://mudakkik.ddns.net/check#history" target="_blank" class="history-link">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
        <path d="M3 3v5h5" />
        <path d="M12 7v5l4 2" />
      </svg>
      <span>سجل التحقق</span>
    </a>
  </div>

  <script type="module" src="/js/popup.js"></script>
</body>

</html>